branches:
  only:
  - "/^v.*$/"
language: python
python:
- '3.6'
sudo: required
services:
- docker
install:
- openssl aes-256-cbc -K $encrypted_bb08f687264e_key -iv $encrypted_bb08f687264e_iv
  -in snap/.snapcraft/travis_snapcraft.cfg -out snap/.snapcraft/snapcraft.cfg -d
- locale-gen en_US.UTF-8
- export LANG="en_US.UTF-8"
- export LANGUAGE="en_US:en"
- export LC_ALL="en_US.UTF-8"
- sudo apt-get update
- sudo add-apt-repository ppa:jonathonf/python-3.6 -y
- sudo apt-get update
- sudo apt-get install python3.6 python3-pip -y
- sudo apt-get install git -y
- cd /home/travis/build/Scille/parsec-build
- pip3 install virtualenv
- virtualenv venv -p python3.6
- source venv/bin/activate
# - pip install -e .
- sudo curl -o /usr/local/bin/n https://raw.githubusercontent.com/visionmedia/n/master/bin/n
- sudo chmod +x /usr/local/bin/n
- sudo n stable
deploy:
skip_cleanup: true
provider: script
script: sudo docker run -v $(pwd):$(pwd) -t snapcore/snapcraft sh -c "apt-get install -y software-properties-common && add-apt-repository -y ppa:deadsnakes/ppa && apt update -qq && cd $(pwd)/snap && snapcraft && snapcraft push *.snap --release edge"
on:
  tags: true